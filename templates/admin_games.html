{% extends "base.html" %}

{% block content %}
<h2>Admin â€“ Games</h2>

<a class="btn btn-success mb-3" href="{{ url_for('admin_add_game') }}">
  <i class="bi bi-plus-circle"></i> Add New Game
</a>

<table class="table table-striped">
  <thead>
    <tr>
      <th>ID</th>
      <th>Title</th>
      <th>Price</th>
      <th>Image</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
  {% for game in games %}
    <tr>
      <td>{{ game.id }}</td>
      <td>{{ game.title }}</td>
      <td>${{ "%.2f"|format(game.price) }}</td>
      <td>
        {% if game.image %}
          <img src="{{ url_for('static', filename=game.image) }}" 
               alt="{{ game.title }}" 
               style="max-width: 50px; max-height: 50px; object-fit: cover; border-radius: 5px;">
        {% else %}
          <span class="text-muted">No image</span>
        {% endif %}
      </td>
      <td>
        <a class="btn btn-sm btn-outline-primary" href="{{ url_for('admin_edit_game', game_id=game.id) }}">
          <i class="bi bi-pencil"></i> Edit
        </a>
        <form method="post" action="{{ url_for('admin_delete_game', game_id=game.id) }}" style="display:inline;">
          <button class="btn btn-sm btn-outline-danger" type="submit"
                  onclick="return confirm('Are you sure you want to delete this game?')">
            <i class="bi bi-trash"></i> Delete
          </button>
        </form>
      </td>
    </tr>
  {% endfor %}
  </tbody>
</table>
{% endblock %}
