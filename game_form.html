{% extends "base.html" %}

{% block content %}
<h1 class="mb-4">
  {% if mode == "create" %}
    Add New Game
  {% else %}
    Edit Game #{{ game.id }}
  {% endif %}
</h1>

<form method="post"
      enctype="multipart/form-data"
      class="card bg-black p-4"
      style="max-width: 500px;">

  <!-- Title -->
  <div class="mb-3">
    <label class="form-label">Title</label>
    <input
      type="text"
      name="title"
      class="form-control"
      value="{{ game.title if game else '' }}"
      required
    >
  </div>

  <!-- Price -->
  <div class="mb-3">
    <label class="form-label">Price</label>
    <input
      type="number"
      step="0.01"
      name="price"
      class="form-control"
      value="{{ game.price if game else '' }}"
      required
    >
  </div>

  <!-- Image -->
  <div class="mb-3">
    <label class="form-label">Cover Image</label>
    <input
      type="file"
      name="image"
      class="form-control"
      accept="image/*"
    >
    {% if game and game.image_filename %}
      <small class="text-muted d-block mt-2">
        Current image:
      </small>
      <img
        src="{{ url_for('static', filename='uploads/' ~ game.image_filename) }}"
        alt="Game image"
        style="max-width: 150px; border-radius: 4px; margin-top: 4px;"
      >
    {% endif %}
  </div>

  <button type="submit" class="btn btn-primary">
    {% if mode == "create" %}Create Game{% else %}Save Changes{% endif %}
  </button>
  <a href="{{ url_for('admin_games') }}" class="btn btn-secondary ms-2">
    Cancel
  </a>
</form>
{% endblock %}
